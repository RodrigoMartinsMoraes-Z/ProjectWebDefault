@{
    ViewData["Title"] = "Shopping List";
}

<div ng-init="verifyAuth()"></div>

<div ng-controller="productController"
     ng-init="getShoppingList()">
    <div class="row"
         ng-repeat="item in shoppingList.items"
         style="margin:5px"
         ng-init="min = 0; max = product.images.length; imageIndex = 0">
        <div class="col-sm-1">
            <button type="button"
                    class="btn btn-sm btn-outline-primary"
                    ng-click="imageIndex = previousImage(min, imageIndex)"
                    style="margin-top:50%">
                <i class="fa fa-arrow-alt-circle-left"></i>
            </button>
        </div>
        <div class="col-sm-1">
            <img src="data:{{item.product.images[imageIndex].type}};base64,{{item.product.images[imageIndex].base64}}"
                 style='display:block; width:50px;height:50px;' />
        </div>
        <div class="col-sm-1">
            <button type="button"
                    class="btn btn-sm btn-outline-primary"
                    ng-click="imageIndex = nextImage(max, imageIndex)"
                    style="margin-top:50%">
                <i class="fa fa-arrow-alt-circle-right"></i>
            </button>
        </div>
        <div class="col-sm-1">{{item.product.name}}</div>
        <div class="col-sm-2">{{item.product.description}}</div>
        <div class="col-sm-2">{{item.product.category.name}}</div>
        <div class="col-sm-1">{{item.product.price | currency}}</div>
        <div class="col-sm-2">
            <input type="number"
                   ng-model="item.product.amount"
                   class="form-control input-group-sm"
                   ng-change="refleshTotalToPay()" />
        </div>
        <div class="col-sm-1">
            <button type="button"
                    class="btn btn-sm btn-outline-info"
                    title="edit"
                    ng-click="removeFromCart(product)">
                <i class="fa fa-minus-square"></i>
            </button>
        </div>
    </div>
</div>

@section Scripts{ 
    <script src="~/controllers/productController.js"></script>
}